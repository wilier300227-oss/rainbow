<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>ようこそRAINBOW合同会社へ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@500;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            background-color: #000;
            font-family: 'Shippori Mincho', serif;
        }

        .video-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .bg-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            background-image: radial-gradient(rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 0.8) 100%),
                url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAIklEQVQIW2NkQAKrVq36zwjjgzhhYWGMYAEYB8RmROaABADeOQ8CXl/xfgAAAABJRU5ErkJggg==');
            z-index: 1;
        }

        .splash-text {
            position: absolute;
            z-index: 2;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            width: 100%;
            color: #ffffff;
            pointer-events: none;
            /* テキストがボタンの邪魔をしないように */
        }

        .line {
            display: block;
            margin: 1rem 0;
            line-height: 1.4;
            white-space: nowrap;
        }

        #line1 {
            font-size: clamp(1.8rem, 5vw, 3.5rem);
            font-weight: 800;
            letter-spacing: 0.15em;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.9);
        }

        #line2 {
            font-size: clamp(1rem, 3vw, 2rem);
            font-weight: 500;
            letter-spacing: 0.1em;
            margin-top: 20px;
            text-shadow: 0 3px 10px rgba(0, 0, 0, 0.9);
        }

        .char {
            display: inline-block;
            opacity: 0;
            will-change: transform, opacity, filter;
        }

        /* --- SKIPボタンのデザイン --- */
        .skip-btn {
            position: absolute;
            bottom: 40px;
            right: 40px;
            z-index: 20;
            /* 最前面 */
            color: rgba(255, 255, 255, 0.7);
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            font-weight: 400;
            letter-spacing: 0.2em;
            padding: 10px 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            /* 最初は隠してアニメーションで出す */
            backdrop-filter: blur(5px);
        }

        .skip-btn:hover {
            background-color: #fff;
            color: #000;
            border-color: #fff;
            padding-right: 30px;
            /* 矢印が出るスペースを作る */
        }

        /* ホバー時に矢印を出す擬似要素 */
        .skip-btn::after {
            content: '→';
            position: absolute;
            right: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .skip-btn:hover::after {
            opacity: 1;
        }

        /* 遷移用ホワイトアウト */
        .fade-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fff;
            z-index: 30;
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>

<body>

    <div class="video-container">
        <video autoplay muted loop playsinline class="bg-video">
            <source src="video/267747_small.mp4" type="video/mp4">
        </video>
        <div class="video-overlay"></div>
    </div>

    <div class="splash-text">
        <div class="line" id="line1">「モノ」を通じて未来を創る</div>
        <div class="line" id="line2">「モノ」が語る、信頼のストーリー。</div>
    </div>

    <div class="skip-btn" id="skipBtn">SKIP</div>

    <div class="fade-overlay"></div>

   <script>
        document.addEventListener("DOMContentLoaded", function () {

            // 遷移処理を一元管理する関数
            let isNavigating = false;

            const goNextPage = () => {
                if (isNavigating) return; // 二重実行防止
                isNavigating = true;

                // 進行中のアニメーションを強制終了
                gsap.killTweensOf("*");

                // フェードアウトして遷移（ここも少し速く 0.8 → 0.6）
                gsap.to(".fade-overlay", {
                    duration: 0.6, 
                    opacity: 1,
                    ease: "power2.inOut",
                    onComplete: () => {
                        window.location.href = "index.html";
                    }
                });
            };

            // SKIPボタンにイベント登録
            const skipBtn = document.getElementById("skipBtn");
            if(skipBtn) {
                skipBtn.addEventListener("click", goNextPage);
            }

            /* --- テキスト分割処理 --- */
            const splitText = (selector) => {
                const element = document.querySelector(selector);
                if (!element) return [];
                const text = element.innerText;
                element.innerHTML = text.split("").map(char => `<span class="char">${char}</span>`).join("");
                return element.querySelectorAll(".char");
            };

            const charsLine1 = splitText("#line1");
            const charsLine2 = splitText("#line2");

            const tl = gsap.timeline();

            tl
                // SKIPボタンを表示
                .to(skipBtn, { opacity: 1, duration: 0.5 }, 0)

                // ★変更点1: 開始までの待ち時間を短縮（0.5秒→0.1秒）
                .addLabel("start", "+=0.1")

                // 1行目
                .to(charsLine1, {
                    duration: 0.8, // ★変更点: 少し速く（1.0→0.8）
                    opacity: 1,
                    y: 0,
                    filter: "blur(0px)",
                    startAt: { y: 40, filter: "blur(15px)", opacity: 0 },
                    stagger: 0.04, // ★変更点: 文字が出る間隔を詰める（0.06→0.04）
                    ease: "power4.out"
                }, "start")

                // 2行目
                .to(charsLine2, {
                    duration: 0.8, // ★変更点: 少し速く（1.0→0.8）
                    opacity: 1,
                    y: 0,
                    filter: "blur(0px)",
                    startAt: { y: 30, filter: "blur(10px)", opacity: 0 },
                    stagger: 0.03, // ★変更点: 文字が出る間隔を詰める（0.04→0.03）
                    ease: "power3.out"
                }, "-=0.6") // 1行目が終わる0.6秒前から食い気味に開始

                // 輝きエフェクト
                .to("#line1", {
                    textShadow: "0 0 30px rgba(255,255,255, 0.5), 0 5px 15px rgba(0,0,0, 0.9)",
                    duration: 2.0,
                    repeat: -1,
                    yoyo: true,
                    ease: "sine.inOut"
                }, "-=0.5")

                // 背景動画のズーム（動きを少し早めてダイナミックに）
                .to(".bg-video", {
                    scale: 1.1,
                    duration: 5, // 全体が短くなるので、ズーム時間も調整
                    ease: "none"
                }, 0)

                // ★変更点3: 全てのアニメーションが終わってからの待機時間を短縮（2.0秒→0.8秒）
                // ここで「読み終わる余韻」を調整します
                .call(goNextPage, null, "+=0.8");
        });
    </script>
</body>

</html>